<html>
  <head>
    <title>スライドショー3</title>
    <link rel='stylesheet' type='text/css' href='./style.css'>
  </head>
  <body>
    <header>
      <h1>スライドショーを作るぷり</h1>
    </header>
    <div class="box">
      <script type="text/javascript"><!--
        myImage = new Array(	// 画像ファイル名の設定
        "./img/1.jpg",		
        "./img/2.jpg",		
        "./img/3.jpg",	
        "./img/1.jpg",		
        "./img/2.jpg",		
        "./img/3.jpg",	
        );	
        myNowCnt = 0;		// 現在表示している配列番号
        myflg = 0;		// どっちを表示して、どっちを消すかのフラグ
        function myChange(check){	// スライドショーメイン関数
          if(check==1){ //加算式
            if(myNowCnt<myImage.length-1){ // 次の配列番号
              myNowCnt = myNowCnt+1;
            }else{
              myNowCnt = 0;
            }	
          }else{ //減少式
            if(myNowCnt==0){ // 次の配列番号
              myNowCnt = myImage.length-1;
            }else{
              myNowCnt = myNowCnt-1;
            }	
          }
          
          myflg = (myflg==0) ? 1 : 0;						// 表示・非表示フラグ反転
          if (myflg == 0){
            document.getElementById("idshow1").src = myImage[myNowCnt];		// 次の画像をセットする
            document.getElementById("idshow1").className = "fadein";		// フェードイン
            document.getElementById("idshow2").className = "fadeout";	// フェードアウト
            document.getElementById(myNowCnt).className = "slide-index-icon slide-index-active"; //インデックスの色を変える
            if(myNowCnt == 0){
              document.getElementById(myImage.length-1).className = "slide-index-icon"; //インデックスの色を変える
              console.log("index.No1-1:"+myImage.length-1);
            }else{
              document.getElementById(myNowCnt-1).className = "slide-index-icon"; //インデックスの色を変える
              console.log("index.No1-2:"+myNowCnt);
            }
            
          }else{
            document.getElementById("idshow2").src = myImage[myNowCnt];		// 次の画像をセットする
            document.getElementById("idshow1").className = "fadeout";	// フェードアウト
            document.getElementById("idshow2").className = "fadein";		// フェードイン
            document.getElementById(myNowCnt).className = "slide-index-icon slide-index-active"; //インデックスの色を変える
            if(myNowCnt == 0){
              document.getElementById(myImage.length-1).className = "slide-index-icon"; //インデックスの色を変える
              console.log("index.No2-1:"+myImage.length-1);
            }else{
              document.getElementById(myNowCnt-1).className = "slide-index-icon"; //インデックスの色を変える
              console.log("index.No2-2:"+myNowCnt);
            }  
          }
        }	
        
        function indexChange(point){
          if(point == 0){
            myNowCnt = myImage.length-1-point;
          }else{
            myNowCnt = point-1;
          }
          myChange(point);
        }
        
        function out(){
          timerID=setInterval("myChange()",2000);	// 2秒周期に画像を更新する
        }
        
        function outStop(){
          clearInterval(timerID);
        }
        
      // -->
      </script>
      <div class="main-image-box">
        <div class="slide">
          <div class="before-button" onClick="myChange(0)"></div>
          <img id="idshow1" class="fadein" src="./img/1.jpg">
          <img id="idshow2" class="fadeout" src="./img/1.jpg">
          <div class="next-button" onClick="myChange(1)"></div>
        </div>
      </div>
      <ul id="js-slide-index" class="slide-index">
        <script>
        <!--
         index = "";
         for(i=0; i<myImage.length; i++){
            index += "<li href='./index.html' id='"+i+"' class='slide-index-icon' onClick='indexChange("+i+")'>●</li>";
         }
         document.getElementById("js-slide-index").innerHTML = index;
         document.getElementById(0).className = "slide-index-icon slide-index-active"; //インデックスの色を変える
         -->
        </script>
      </ul>
      <div class="out-button-box">
        <input type="button" value="自動" onClick="out()">
        <input type="button" value="停止" onClick="outStop()">
      </div>
      <script type="text/javascript"><!--
        // myChange(); 
      // -->
      </script>
      <div class="article-body">
        <h2>実装した機能</h2>
        <ol>
          <li>自動スライドon/off</li>
          <li>ボタンでのスライド切り替え</li>
          <li>インデックスから切り替え</li>
        </ol>
        <h2>未実装</h2>
        <ol>
          <li>インデックスの現在地がおかしいバグ修正</li>
          <li>逆回りにスライドできるようにする</li>
        </ol>
        <h2>追加予定</h2>
        <ol>
          <li>前のスライド、次のスライドが半分映り込む</li>
          <li>クリックでスライドイン</li>
        </ol>
      </div>
    </div>
    <footer>
      <small>ポップステップゲッチュ〜〜</small>
    </footer>
  </body>
</html>

